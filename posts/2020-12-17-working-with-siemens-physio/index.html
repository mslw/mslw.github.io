<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=theme-color content="#494f5c">
<meta name=msapplication-TileColor content="#494f5c">
<meta itemprop=name content="Working with Siemens physio (.puls) files">
<meta itemprop=description content="Siemens Physiological Monitoring Unit uses its own format for data storage. Conveniently, it produces text files with a fairly simple representation, which should be easy to parse. I only worked with pulse oximetry, but similar rules should hold for other physio data. This is a compilation of external sources, own experiences and code snippets.
Toolboxes Before we dig into the files: you may find what you already need in one of the following toolboxes (with which I have no experience), both in Matlab:"><meta itemprop=datePublished content="2020-12-17T16:25:00+01:00">
<meta itemprop=dateModified content="2020-12-17T16:25:00+01:00">
<meta itemprop=wordCount content="1292">
<meta itemprop=keywords content="python,neuroscience,tips & tricks,"><meta property="og:title" content="Working with Siemens physio (.puls) files">
<meta property="og:description" content="Siemens Physiological Monitoring Unit uses its own format for data storage. Conveniently, it produces text files with a fairly simple representation, which should be easy to parse. I only worked with pulse oximetry, but similar rules should hold for other physio data. This is a compilation of external sources, own experiences and code snippets.
Toolboxes Before we dig into the files: you may find what you already need in one of the following toolboxes (with which I have no experience), both in Matlab:">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mslw.github.io/posts/2020-12-17-working-with-siemens-physio/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-12-17T16:25:00+01:00">
<meta property="article:modified_time" content="2020-12-17T16:25:00+01:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Working with Siemens physio (.puls) files">
<meta name=twitter:description content="Siemens Physiological Monitoring Unit uses its own format for data storage. Conveniently, it produces text files with a fairly simple representation, which should be easy to parse. I only worked with pulse oximetry, but similar rules should hold for other physio data. This is a compilation of external sources, own experiences and code snippets.
Toolboxes Before we dig into the files: you may find what you already need in one of the following toolboxes (with which I have no experience), both in Matlab:">
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color>
<link rel="shortcut icon" href=/favicon.ico>
<title>Working with Siemens physio (.puls) files</title><link rel=stylesheet href=https://mslw.github.io/css/style.min.037b6ee8f8c1baab6a3d0a9da11c3ff18a7552471f16c59fd98538d5ce99208b.css integrity="sha256-A3tu6PjBuqtqPQqdoRw/8Yp1UkcfFsWf2YU41c6ZIIs=" crossorigin=anonymous>
<link rel=stylesheet href=https://mslw.github.io/fontawesome/css/all.css>
<link rel=stylesheet href=https://mslw.github.io/academicons/css/academicons.css>
</head><body id=page>
<header id=site-header class="animated slideInUp">
<div class="hdr-wrapper section-inner">
<div class=hdr-left>
<div class=site-branding>
<a href=https://mslw.github.io/>Michał Szczepanik</a>
</div><nav class="site-nav hide-in-mobile">
<a href=https://mslw.github.io/posts/>Posts</a>
<a href=https://mslw.github.io/about>About</a>
</nav></div><div class="hdr-right hdr-icons">
<span class="hdr-social hide-in-mobile"><a href=https://github.com/mslw target=_blank rel="noopener me" title=Github><i class="fab fa-github"></i></a><a href=https://orcid.org/0000-0002-4028-2087 target=_blank rel="noopener me" title=Orcid><i class="fab fa-orcid"></i></a><a href=https://masto.ai/@doktorpanik target=_blank rel="noopener me" title=Mastodon><i class="fab fa-mastodon"></i></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
</div></div></header><div id=mobile-menu class="animated fast">
<ul>
<li><a href=https://mslw.github.io/posts/>Posts</a></li><li><a href=https://mslw.github.io/about>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster">
<article class=thin>
<header class=post-header>
<div class=post-meta><span>Dec 17, 2020</span></div><h1>Working with Siemens physio (.puls) files</h1></header><div class=content>
<p>Siemens Physiological Monitoring Unit uses its own format for data storage. Conveniently, it produces text files with a fairly simple representation, which should be easy to parse. I only worked with pulse oximetry, but similar rules should hold for other physio data. This is a compilation of external sources, own experiences and code snippets.</p><h2 id=toolboxes>Toolboxes<a href=#toolboxes class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Before we dig into the files: you may find what you already need in one of the following toolboxes (with which I have no experience), both in Matlab:</p><ul>
<li><a href=https://sites.google.com/site/phlemtoolbox/>Physiological Log Extraction for Modelling</a> (PhLEM) - a toolbox to generate physiological covariates to be included as regressors in SPM GLM</li><li><a href=https://gitlab.ethz.ch/physio/physio-doc>PhysIO toolbox</a>, part of Translational Algorithms for Psychiatry-Advancing Science (TAPAS) collection</li></ul><h2 id=sources>Sources<a href=#sources class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>The information is out there, but it was not very easy to find and not always consistent (no doubt due to different variations of the format produced by different scanners or software versions). My primary references are the following:</p><ol>
<li><a href=https://wiki.humanconnectome.org/display/PublicData/Understanding+Timing+Information+in+HCP+Physiological+Monitoring+Files>HCP wiki</a></li><li><a href=https://www.mccauslandcenter.sc.edu/crnl/tools/part>PART toolbox website</a> from McCausland center (by Chris Rorden)</li><li><a href=https://gitlab.ethz.ch/physio/physio-doc/-/wikis/MANUAL_PART_READIN>Documentation for PhysIO toolbox</a> from ETH Zurich</li><li><a href=https://cfn.upenn.edu/aguirre/wiki/public:pulse-oximetry_during_fmri_scanning>GKAguirre lab wiki</a></li></ol><h2 id=file-structure>File structure<a href=#file-structure class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Based on what I&rsquo;ve seen, some details may depend on hardware & software versions used, but the general principles should be the same. The example below is based on the data obtained on the Trio scanner at the Laboratory of Brain Imaging. At the end I will also point out differences in the data collected on a Prisma in a different lab.</p><p>The .puls file is just a text file, in which the first line contains all the data points (!), and the following lines contain metadata. It looks like this:</p><pre tabindex=0><code>1 2 40 280 1102 1069 1031 1017 1136 1449 …
ECG  Freq Per: 0 0
PULS Freq Per: 100 595
RESP Freq Per: 0 0
EXT  Freq Per: 0 0
ECG  Min Max Avg StdDiff: 0 0 0 0
PULS Min Max Avg StdDiff: 448 1298 607 2
RESP Min Max Avg StdDiff: 0 0 0 0
EXT  Min Max Avg StdDiff: 0 0 0 0
NrTrig NrMP NrArr AcqWin: 0 0 0 0
LogStartMDHTime:  54133082
LogStopMDHTime:   55183837
LogStartMPCUTime: 54132545
LogStopMPCUTime:  55179315
6003
</code></pre><p>The first four (?) digits in the first line are probably acquisition parameters (the meaning of which I don&rsquo;t know), the remaining are signal values interspersed with some markers (values &lt; 5000 are data samples, values >= 5000 are markers that have to be sifted out). Values 5003 and 6003 are apparently used to mark the beginning and end of the metadata (5003 ends the first line). Sampling frequency for our setup is 50 Hz (but it can be easily verified).</p><p>There are plenty 5000 markers in the signal and I am not sure what they represent - judging by their location just after signal peaks, they seem to be heart beat markers[^2] inserted by the software (presumably analogous to the red triangles shown on the technician&rsquo;s console while monitoring the signal). Even if that is the case, you will most likely want to use a peak detection method from your favourite data analysis suite instead.</p><p>In the metadata, the crucial entries to watch for are the MDH Times[^1], expressed in milliseconds after midnight. Although notation is different, they are taken from the same clock as the time values in DICOM files and can be used for synchronising the two modalities.</p><h2 id=loading-the-data-using-python>Loading the data using python<a href=#loading-the-data-using-python class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Numpy and pydicom libraries are essential; we will also use the built-in itertools:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pydicom</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>itertools</span> <span class=kn>import</span> <span class=n>islice</span>
</span></span></code></pre></div><p>Let&rsquo;s start by defining paths to the pulse file and the first dicom file of a given series:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>pulse_file_name</span> <span class=o>=</span> <span class=n>path_to_the_pulse_file</span>
</span></span><span class=line><span class=cl><span class=n>dicom_file_name</span> <span class=o>=</span> <span class=n>path_to_the_dicom_file</span>
</span></span></code></pre></div><p>Loading the signal and dropping the markers is trivial, just remember to specify <code>dtype</code> & <code>max_rows</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>loadtxt</span><span class=p>(</span><span class=n>pulse_file_name</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>int</span><span class=p>,</span> <span class=n>max_rows</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=mi>4</span><span class=p>:]</span>  <span class=c1># drop parameters stored at the beginning</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=n>data</span> <span class=o>&lt;</span> <span class=mi>5000</span><span class=p>)]</span>  <span class=c1># drop markers</span>
</span></span></code></pre></div><p>We can read all the metadata (although we only need <code>LogStartMDHTime</code>) into a dictionary:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>meta</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>pulse_file_name</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>islice</span><span class=p>(</span><span class=n>f</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>  <span class=c1># read from second line to the end</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>meta</span><span class=p>[</span><span class=n>k</span><span class=o>.</span><span class=n>strip</span><span class=p>()]</span> <span class=o>=</span> <span class=n>v</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># don’t care about entries which can&#39;t be split into key: value</span>
</span></span><span class=line><span class=cl>            <span class=k>pass</span>
</span></span></code></pre></div><p>The time needs to be converted from string to a number, we can also convert it from miliseconds to seconds:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>pulse_time_sec</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>meta</span><span class=p>[</span><span class=s1>&#39;LogStartMDHTime&#39;</span><span class=p>])</span> <span class=o>*</span> <span class=mf>0.001</span>
</span></span></code></pre></div><p>Now, to read the time from dicom header we can use pydicom. I am using field (0008, 0032) Acquisition Time:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>ds</span> <span class=o>=</span> <span class=n>pydicom</span><span class=o>.</span><span class=n>dcmread</span><span class=p>(</span><span class=n>dicom_file_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>dicom_time</span> <span class=o>=</span> <span class=n>ds</span><span class=o>.</span><span class=n>AcquisitionTime</span>
</span></span></code></pre></div><p>The time looks like this: <code>'090029.930000'</code>. The first two digits are hours, next two are minutes, next two - seconds. Four digits after the dot are <em>tics</em> (1/10000 of a second), and the two trailing zeros can be ignored. A conversion function (translating into seconds) can look as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>dicomtime2sec</span><span class=p>(</span><span class=n>t</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>h</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>t</span><span class=p>[:</span><span class=mi>2</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>t</span><span class=p>[</span><span class=mi>2</span><span class=p>:</span><span class=mi>4</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>t</span><span class=p>[</span><span class=mi>4</span><span class=p>:</span><span class=mi>6</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>tics</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>t</span><span class=p>[</span><span class=mi>7</span><span class=p>:</span><span class=mi>11</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>(</span><span class=n>h</span> <span class=o>*</span> <span class=mi>3600</span> <span class=o>+</span> <span class=n>m</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>+</span> <span class=n>s</span> <span class=o>+</span> <span class=n>tics</span> <span class=o>*</span> <span class=mf>0.0001</span><span class=p>)</span>
</span></span></code></pre></div><p>We will use this function to convert the value into seconds after midnight (same as physio recordings) and then calculate the offset between the recordings. Take care with studies lasting through midnight!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>dicom_time_sec</span> <span class=o>=</span> <span class=n>dicomtime2sec</span><span class=p>(</span><span class=n>dicom_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>delta_time</span> <span class=o>=</span> <span class=n>pulse_time_sec</span> <span class=o>-</span> <span class=n>dicom_time_sec</span>
</span></span></code></pre></div><p>With that, we have all we need (pulse oximetry signal and its start time relative to the MRI data)!</p><p>Finally, we can verify the sampling frequency by dividing the number of samples by the duration read from metadata (likely it won&rsquo;t be <em>exactly</em> 50 Hz, but it should come negligibly close):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>duration</span> <span class=o>=</span> <span class=p>(</span> <span class=nb>int</span><span class=p>(</span><span class=n>footer</span><span class=p>[</span><span class=s1>&#39;LogStopMDHTime&#39;</span><span class=p>])</span> <span class=o>-</span> <span class=nb>int</span><span class=p>(</span><span class=n>footer</span><span class=p>[</span><span class=s1>&#39;LogStartMDHTime&#39;</span><span class=p>])</span> <span class=p>)</span> <span class=o>/</span> <span class=mi>1000</span> <span class=c1># in seconds</span>
</span></span><span class=line><span class=cl><span class=n>calculated_fs</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>/</span> <span class=n>duration</span>
</span></span></code></pre></div><p>The result can now be saved in a desired format for further processing. When exporting, consider using the <a href=https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/06-physiological-and-other-continuous-recordings.html>BIDS convention for physiological recordings</a>, which uses a gzip compressed tsv file for data (tip: use <code>numpy.savetxt</code> - for filenames ending in <code>.gz</code>, the file is automatically compressed) and a json file to store sampling frequency and relative start time (tip: use <code>json.dump</code> from built-in json library).</p><p>This is left as an exercise for the reader, and so is dealing with cases when you have to divide one pulse recording made across several MRI runs.</p><h2 id=prisma---note-on-the-differences>Prisma - note on the differences<a href=#prisma---note-on-the-differences class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>I also had a chance to take a look at data from another lab, which has a Prisma scanner. It was <em>same, but different</em>. Most notably, it had text metadata inserted <em>inbetween</em> the data values. Luckily, the marker convention seems to be clear, with 5002 and 6002 values used to mark the beginning and end of the inserted information. Interestingly, the sampling frequency turned out to be 400 Hz in this case. Beginning of the data may look as follows:</p><pre tabindex=0><code>1 2 40 280 5002 LOGVERSION_PULS   1 6002 3185 3167 &lt; ... about 200 datapoints ...&gt; 5002 uiHwRevisionPeru/ucHWRevLevel: 0, uiPartNbrPeruPub: 0, uiHwRevisionPpu/ucSWSubRevLevel: 0, uiPartNbrPpuPub: 0, uiSwVersionPdau/ucSWMainRevLevel: 0 6002 1395 1391 ... 
</code></pre><p>The <code>numpy.loadtxt</code> function used previously will obviously crash on such input, luckily the most basic way of processing won&rsquo;t be much slower. Let&rsquo;s read the line, split by spaces and collect one element at a time (pausing collection for items between 5002 and 6002):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_pulse</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>line</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=n>elements</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>read</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>elem</span> <span class=ow>in</span> <span class=n>elements</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>elem</span> <span class=o>==</span> <span class=s1>&#39;5002&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>read</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>elem</span> <span class=o>==</span> <span class=s1>&#39;6002&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>read</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>read</span> <span class=o>==</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>elem</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span></code></pre></div><hr>
<p>[^1] According to the website for PART, MDH is the DICOM clock, while MPCU is the physio clock. Of the sources, only the Aguirre wiki suggests using MPCU, which is likely a mistake.</p><p>[^2] Aguirre wiki suggests that they are scanner pulses marking TR, but the timing doesn&rsquo;t check out, so maybe it depends on software version.</p></div><hr class=post-end>
<footer class=post-info>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-feather"><path d="M20.24 12.24a6 6 0 00-8.49-8.49L5 10.5V19h8.5z"/><line x1="16" y1="8" x2="2" y2="22"/><line x1="17.5" y1="15" x2="9" y2="15"/></svg>Michał Szczepanik</p><p>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://mslw.github.io/tags/python>python</a></span><span class=tag><a href=https://mslw.github.io/tags/neuroscience>neuroscience</a></span><span class=tag><a href=https://mslw.github.io/tags/tips-tricks>tips & tricks</a></span>
</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1292 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2020-12-17 15:25 +0000</p></footer></article><div class="post-nav thin">
<a class=next-post href=https://mslw.github.io/posts/2021-03-19-giving-in-to-pyenv/>
<span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Giving in to pyenv</span>
</a>
<a class=prev-post href=https://mslw.github.io/posts/2020-12-17-docker-pruning/>
<span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>Docker pruning</span>
</a>
</div><div id=comments class=thin>
</div></main><footer id=site-footer class="section-inner thin animated fadeIn faster">
<p>&copy; 2023 <a href=https://mslw.github.io/>Michał Szczepanik</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>
Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://mslw.github.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a>
</p></footer><script src=https://mslw.github.io/js/bundle.min.8256b8724b9578bbdf6d6f04c894255bc760e78e8a2d60ec0a91ea993acd3b77.js integrity="sha256-gla4ckuVeLvfbW8EyJQlW8dg546KLWDsCpHqmTrNO3c=" crossorigin=anonymous></script>
</body></html>